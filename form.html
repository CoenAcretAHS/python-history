<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="author" content="Coen Acret">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="robots" content="noindex" />
	<link type="text/css" rel="stylesheet" href="CSS/misc.css">
	<title>Weather Data</title>

<script>
	function get_vars() {
		let lat = document.getElementsByName("latitude")[0].value
		let lon = document.getElementsByName("longitude")[0].value
		let weatherData;
fetch("https://weatherbit-v1-mashape.p.rapidapi.com/current?lon=" + lon + "&lat=" + lat, {
	"method": "GET",
	"headers": {
		"x-rapidapi-key": "771be1521amshc504b5ff9fd310ap116d26jsn235e05170252",
		"x-rapidapi-host": "weatherbit-v1-mashape.p.rapidapi.com"
	}
})
		
		.then(response => response.json())
		.then(data => {
			console.log(data)
			document.getElementById("name").innerHTML=data.data[0].city_name;
			document.getElementById("app_temp").innerHTML=data.data[0].app_temp;
			document.getElementById("temp").innerHTML=data.data[0].temp;
			document.getElementById("cloud_desc").innerHTML=data.data[0].weather.description;
			document.getElementById("precip").innerHTML=data.data[0].precip;
			document.getElementById("clouds").innerHTML=data.data[0].clouds;
			document.getElementById("rh").innerHTML=data.data[0].rh;
			document.getElementById("wind_dir_full").innerHTML=data.data[0].wind_cdir_full;
			document.getElementById("wind_speed").innerHTML=data.data[0].wind_spd;
			document.getElementById("wind_dir").innerHTML=data.data[0].wind_dir;
			document.getElementById("sunset").innerHTML=data.data[0].sunrise;
			document.getElementById("sunrise").innerHTML=data.data[0].sunset;
			document.getElementById("timezone").innerHTML=data.data[0].timezone;
			if (data.data[0].pod == "d") {
				document.getElementById("pod").innerHTML="day";
			} else if (data.data[0].pod == "n") {
				document.getElementById("pod").innerHTML="night";
			} else {
				document.getElementById("pod").innerHTML="error";
			}
			   
});
			
alert("Weather data fetched!")
		;}</script>
</head>
	
<body>
	<div class="main">
	<nav>
		<a href="index.html">Home</a>
		<a href="clouds.html">Clouds</a>
		<a href="iframe.html">Guides</a>
	</nav>
<div class="form" id="form" stle="display:inline-block;">
	<div id="parent">
	<h2 id="page-header">Weather Form</h2>
		
		<p class="hover" id="child">The co-ordinates for Ballina are auto filled for convenience.</p><br></div>
		<!--<marquee class="marquee_warnings" bgcolor="#B39A1B" scrolldelay=60 behavior="scroll"><b>SEVERE WEATHER WARNINGS: Flooding, Heavy Rain and Dangerous Surf Conditions Mid North Coast | Evacuation orders in suburbs of Sydney | A nice day found to host AHS cross country</b></marquee>
-->
	
<form target="hidden_form" id="weather" onSubmit="get_vars()">
		<label for="latitude">Input latitude:</label><br>
		<input type="text" id="latitude" name="latitude" value="-28.8409" style="color:black;font-weight: bolder"><br><br>
		
		<label for="longitude">Input longitude:</label><br>
		<input type="text" id="longitude" name="longitude" value="153.4496" style="color:black;font-weight: bolder"><br><br>
		
		<input type="submit" value="Get weather!" style="color:black;font-weight: bolder">
	</form>
	</div>
	<br><br>
	
	<div id="content">
		<div id="general">
			<h3>General Weather</h3>
	<span class="inline"><h4>Place name:</h4>
	<p id="name"></p></span>
	<span class="inline">
		<h4>Feels like (deg C):</h4>
		<p id="app_temp"></p></span>
		
	<span class="inline">
		<h4>Actual temperature (deg C):</h4>
		<p id="temp"></p>
			</span></div>
		<br>
		<div id="clouds_etc">
			<h3>Cloud and Rainfall Data</h3>
	<span class="inline">
		<h4>Clouds Description</h4>
		<p id="cloud_desc"></p>
		</span>
	<span class="inline">
			<h4>Rainfall (millimetres/hour)</h4>
			<p id="precip"></p>
			</span>
	<span class="inline">
			<h4>Cloud Coverage (%)</h4>
			<p id="clouds"></p>
			</span>
			
	<span class="inline">
			<h4>Humidity (%)</h4>
			<p id="rh"></p>
			</span>
		</div><br><div id="wind_data">
		<h3>Wind Data</h3>
		<span class="inline">
			<h4>Wind Direction</h4>
			<p id="wind_dir_full"></p>
		</span>
		
		<span class="inline">
			<h4>Wind Speed (m/s)</h4>
			<p id="wind_speed"></p>
		</span>
		
		<span class="inline">
			<h4>Wind Direction (deg)</h4>
			<p id="wind_dir"></p>
		</span></div><br><div id="other">
		<h3>Other Statistics</h3>
		
		<span class="inline">
			<h4>Sunset Time</h4>
			<p id="sunset"></p>
		</span>
		
		<span class="inline">
			<h4>Sunrise Time</h4>
			<p id="sunrise"></p>
		</span>
		
		<span class="inline">
			<h4>Timezone</h4>
			<p id="timezone"></p>
		</span>
		
		<span class="inline">
			<h4>Part of the Day</h4>
			<p id="pod"></p>
		</span>
		</div>
	</div>
<iframe name="hidden_form" class="hide"></iframe>
	
		<div class="footer">
		Coen Acret | 2021 | 
		<a href="bibliography.html">Bibliography</a>
	</div></div>
</body>
</html>
